[TOC]

## 浏览器知识

### 从输入 url 到呈现页面发生了哪些事

* **DNS 解析**

  首先在本地域名服务器中查询IP地址，如果没有，按照如下顺序
  根域名服务器.-> 顶级域名服务器 `com` -> …… -> 本地域名服务器
  .-> `.com` -> `google.com.` -> `www.google.com.` 

  优化：DNS 缓存
  浏览器缓存 -> 系统缓存 -> 路由器缓存 -> ISP (运营商) DNS 缓存 -> 根域名服务器 -> 顶级域名服务器 `com` -> 主域名服务器的顺序

  浏览器缓存可通过在浏览器输入 `chrome://net-internals/#dns` 查看
  系统缓存在 `/etc/hosts` 文件中（ `linux` 系统）

* **TCP 请求（三次握手）+ HTTP 请求**

  + 客户端：我要请求数据，可以吗
  + 服务器：可以
  + 客户端：好的

  客户机与服务器建立连接后就可以通信，浏览器向web服务器发送http请求

* **浏览器解析渲染页面**

  + 处理 `HTML` 标记并构建 `DOM` 树
  + 处理 `CSS` 标记并构建 `CSSOM` 树。
  + 将 `DOM` 与 `CSSOM` 合并成一个渲染树。
  + 根据渲染树来布局，以计算每个节点的几何信息。
  + 调用 `GPU` 绘制，合成图层，显示在屏幕上

`DOMContentLoaded` 事件触发代表初始的 `HTML` 被完全加载和解析，不需要等待 `CSS` ， `JS` ，图片加载。
`Load` 事件触发代表页面中的 `DOM` ， `CSS` ， `JS` ，图片已经全部加载完毕。

* **连接结束，四次挥手**

  + 客户端：我没要数据要发送了，准备挂了
  + 服务器：收到，但我还有一些数据没发送完，稍等一哈…
  + 服务端：好了，发送完了，可以断开连接了
  + 客户端：OK，你断开连接吧（内心独白：我将会在2倍的最大报文段生存时间后关闭连接，如果再收到服务器的消息，那么服务器就是没听到我最后这句话，我就再发送一遍）。

### http2.0

### GET和POST的区别

* GET产生一个TCP数据包；POST产生两个TCP数据包。
* GET在浏览器回退时是无害的，而POST会再次提交请求。
* GET产生的URL地址可以被Bookmark，而POST不可以。
* GET请求会被浏览器主动cache，而POST不会，除非手动设置。
* GET请求只能进行url编码，而POST支持多种编码方式。
* GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。
* GET请求在URL中传送的参数是有长度限制的，而POST么有。
* 对参数的数据类型，GET只接受ASCII字符，而POST没有限制。
* GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。
* GET参数通过URL传递，POST放在Request body中。

