## 浏览器知识

### 从输入 url 到呈现页面发生了哪些事

* **DNS 解析**
  首先在本地域名服务器中查询IP地址，如果没有，按照如下顺序
  根域名服务器. -> 顶级域名服务器`com` -> …… -> 本地域名服务器
  . -> `.com` -> `google.com.` -> `www.google.com.`

  优化：DNS 缓存
  浏览器缓存 -> 系统缓存 -> 路由器缓存 -> ISP (运营商) DNS 缓存 -> 根域名服务器 -> 顶级域名服务器`com` -> 主域名服务器的顺序

  浏览器缓存可通过在浏览器输入 `chrome://net-internals/#dns`查看
  系统缓存在`/etc/hosts`文件中（`linux`系统）
* **TCP请求（三次握手）+ HTTP请求**
  * 客户端：我要请求数据，可以吗
  * 服务器：可以
  * 客户端：好的

  客户机与服务器建立连接后就可以通信，浏览器向web服务器发送http请求

* **浏览器解析渲染页面**
  * 处理`HTML`标记并构建`DOM`树
  * 处理`CSS`标记并构建`CSSOM`树。
  * 将`DOM`与`CSSOM`合并成一个渲染树。
  * 根据渲染树来布局，以计算每个节点的几何信息。
  * 调用`GPU`绘制，合成图层，显示在屏幕上

  `DOMContentLoaded`事件触发代表初始的`HTML`被完全加载和解析，不需要等待`CSS`，`JS`，图片加载。
  `Load`事件触发代表页面中的`DOM`，`CSS`，`JS`，图片已经全部加载完毕。

* **连接结束，四次挥手**
  * 客户端：我没要数据要发送了，准备挂了
  * 服务器：收到，但我还有一些数据没发送完，稍等一哈…
  * 服务端：好了，发送完了，可以断开连接了
  * 客户端：OK，你断开连接吧（内心独白：我将会在2倍的最大报文段生存时间后关闭连接，如果再收到服务器的消息，那么服务器就是没听到我最后这句话，我就再发送一遍）。

### 性能优化


